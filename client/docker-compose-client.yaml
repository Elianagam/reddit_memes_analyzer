version: "3"
services:
  client:
    container_name: client
    image: client:latest
    entrypoint: python3 /main.py
    restart: on-failure
    environment:
      - FILE_POSTS=/data/posts.csv
      - CHUNKSIZE=400
      - POSTS_QUEUE=client_posts_queue
      - COMMENTS_QUEUE=client_comments_queue
      - FILE_COMMENTS=/data/comments.csv
      - STUDENTS_QUEUE=student_url_queue
      - AVG_QUEUE=posts_avg_score_queue
      - IMAGE_QUEUE=post_avg_sentiments_queue
    networks:
      - rabbitmq

networks:
  rabbitmq: 
    external: 
      name: reddit_memes_analyzer_rabbitmq

